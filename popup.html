<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfect Insta Post</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üì∏ Perfect Insta Post</h1>
            <p class="subtitle">G√©n√©rez le post Instagram parfait avec l'IA</p>

            <!-- Barre utilisateur -->
            <div class="user-bar" id="userBar" hidden>
                <div class="user-info">
                    <span class="user-email" id="userEmail"></span>
                    <span class="user-plan" id="userPlan">Free</span>
                </div>
                <div class="usage-info">
                    <span class="usage-text" id="usageText">0/5 posts ce mois</span>
                    <button class="upgrade-btn" id="upgradeBtn" hidden>Upgrade Pro</button>
                </div>
                <button class="logout-btn" id="logoutBtn">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="main-content">
            <!-- Section Upload d'image -->
            <div class="upload-area" id="uploadArea">
                <div class="upload-placeholder">
                    <svg width="48" height="48" fill="#ccc" viewBox="0 0 24 24">
                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                    </svg>
                    <p>Cliquez ou glissez votre image ici</p>
                    <small>JPG, PNG, WebP - Max 10MB</small>
                </div>
                <input type="file" id="imageInput" accept="image/*" hidden>
                <img id="previewImage" class="image-preview" hidden>

                <!-- Pro Features Preview -->
                <div class="pro-features-preview" id="proFeaturesPreview">
                    <div class="features-header">
                        <h4>‚ú® D√©bloquez plus avec Pro</h4>
                    </div>
                    <div class="features-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üìç</span>
                            <div class="feature-text">
                                <strong>Localisation</strong>
                                <small>Hashtags g√©olocalis√©s automatiques</small>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üéØ</span>
                            <div class="feature-text">
                                <strong>Contexte personnalis√©</strong>
                                <small>Angle et √©motion sur mesure</small>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìè</span>
                            <div class="feature-text">
                                <strong>Contr√¥le longueur</strong>
                                <small>Courte, moyenne ou longue</small>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üé®</span>
                            <div class="feature-text">
                                <strong>Styles vari√©s</strong>
                                <small>Storytelling, motivant, etc.</small>
                            </div>
                        </div>
                    </div>
                    <div class="pro-cta">
                        <button class="mini-upgrade-btn" id="miniUpgradeBtn">
                            <span>üöÄ Passer √† Pro</span>
                            <small>19‚Ç¨/mois ‚Ä¢ 50 posts</small>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Section Configuration -->
            <section class="config-section" id="configSection" hidden>
                <h3>‚öôÔ∏è Configuration</h3>
                <div class="form-group">
                    <label for="postType">Type de post :</label>
                    <select id="postType">
                        <option value="lifestyle">Lifestyle</option>
                        <option value="food">Nourriture</option>
                        <option value="travel">Voyage</option>
                        <option value="fashion">Mode</option>
                        <option value="business">Business</option>
                        <option value="nature">Nature</option>
                        <option value="art">Art</option>
                        <option value="auto">Auto-d√©tection</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tone">Ton du message :</label>
                    <select id="tone">
                        <option value="casual">D√©contract√©</option>
                        <option value="professional">Professionnel</option>
                        <option value="funny">Humoristique</option>
                        <option value="inspirational">Inspirant</option>
                        <option value="educational">√âducatif</option>
                    </select>
                </div>

                <!-- Options avanc√©es -->
                <div class="advanced-section" id="advancedSection">
                    <h4 class="collapsible-header" id="advancedHeader">
                        <span>‚ú® Options avanc√©es</span>
                        <span class="pro-badge" id="proOnlyBadge" hidden>PRO</span>
                        <span class="collapse-icon">‚ñº</span>
                    </h4>
                    <div class="collapsible-content" id="advancedContent">

                    <div class="form-group">
                        <label for="location">üìç Lieu/Localisation :</label>
                        <input type="text" id="location" placeholder="ex: Lac d'Annecy, Paris, chez moi...">
                        <small>Ajoute des hashtags g√©olocalis√©s et du contexte</small>
                    </div>

                    <div class="form-group">
                        <label for="context">üéØ Contexte/Situation :</label>
                        <input type="text" id="context" placeholder="ex: Weekend en famille, soir√©e entre amis...">
                        <small>Personnalise l'angle et l'√©motion du post</small>
                    </div>

                    <div class="form-group">
                        <label for="captionLength">üìè Longueur de l√©gende :</label>
                        <select id="captionLength">
                            <option value="medium">Moyenne (100-150 mots)</option>
                            <option value="short">Courte (50-80 mots)</option>
                            <option value="long">Longue (150-250 mots)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="captionStyle">üé® Style de l√©gende :</label>
                        <select id="captionStyle">
                            <option value="engaging">Engageant (questions)</option>
                            <option value="storytelling">Storytelling (histoire)</option>
                            <option value="informative">Informatif (facts)</option>
                            <option value="motivational">Motivant (citation)</option>
                            <option value="personal">Personnel (ressenti)</option>
                        </select>
                    </div>

                    <!-- Overlay pro-only pour utilisateurs gratuits -->
                    <div class="pro-overlay" id="proOverlay" hidden>
                        <div class="pro-message">
                            <h3>üöÄ Fonctionnalit√©s Pro</h3>
                            <p>D√©bloquez les options avanc√©es :</p>
                            <ul>
                                <li>üìç Localisation personnalis√©e</li>
                                <li>üéØ Contexte et situation</li>
                                <li>üìè Contr√¥le de la longueur</li>
                                <li>üé® Styles vari√©s</li>
                                <li>‚ö° 50 posts par mois</li>
                            </ul>
                            <button class="upgrade-btn-big" id="upgradeFromOverlay">
                                Passer √† Pro - 19‚Ç¨/mois
                            </button>
                        </div>
                    </div>
                    </div>
                </div>
                <button id="generateBtn" class="generate-btn">
                    <span class="btn-text">‚ú® G√©n√©rer le post</span>
                    <span class="loader" hidden></span>
                </button>
            </section>

            <!-- Section R√©sultats -->
            <section class="results-section" id="resultsSection" hidden>
                <h3>üéØ Votre post parfait</h3>
                <div class="result-card">
                    <h4>L√©gende :</h4>
                    <textarea id="generatedCaption" class="caption-textarea" rows="6"></textarea>
                </div>
                <div class="result-card">
                    <h4>Hashtags :</h4>
                    <div id="hashtagsContainer" class="hashtags-container"></div>
                </div>
                <div class="result-card">
                    <h4>Suggestions d'am√©lioration :</h4>
                    <ul id="suggestionsList" class="suggestions-list"></ul>
                </div>
                <div class="action-buttons">
                    <button id="copyBtn" class="copy-btn">üìã Copier tout</button>
                    <button id="newPostBtn" class="new-post-btn">üîÑ Nouveau post</button>
                </div>
            </section>

            <!-- Section Connexion Google OAuth -->
            <section class="auth-section" id="authSection" hidden>
                <div class="auth-content">
                    <h3>üîê Connexion requise</h3>
                    <p class="auth-info">Connectez-vous avec Google pour utiliser Perfect Insta Post :</p>

                    <div class="auth-benefits">
                        <div class="benefit-item">‚ú® G√©n√©ration de posts avec IA</div>
                        <div class="benefit-item">üéØ Hashtags optimis√©s</div>
                        <div class="benefit-item">üìä Suivi de votre usage</div>
                        <div class="benefit-item">üöÄ 5 posts gratuits par mois</div>
                    </div>

                    <button id="googleLoginBtn" class="google-login-btn">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyLjU2IDEyLjI1QzIyLjU2IDExLjQ3IDIyLjQ5IDEwLjc3IDIyLjM2IDEwLjA5SDE2VjE0LjI0SDIwLjAzQzE5Ljg1IDE1LjM1IDE5LjIgMTYuMjkgMTguMjUgMTYuODlWMTkuNTNIMjAuNTJDMjEuNzkgMTguMjUgMjIuNTYgMTUuNTMgMjIuNTYgMTIuMjVaIiBmaWxsPSIjNDI4NUY0Ii8+CjxwYXRoIGQ9Ik0xMiAyMi4yQzE1LjI3IDIyLjIgMTguMDQgMjEuMSAxOS4wNSAxOS4yMUgxNi43OEMxNi4wMiAxOS45MiAxNC45NiAyMC4zIDEyIDIwLjNDOS4wNCAyMC4zIDYuNTQgMTguMzMgNS42OSAxNS41NEgzLjI3VjE4LjJDNC4zMyAyMC4zIDcuOTEgMjIuMiAxMiAyMi4yWiIgZmlsbD0iIzM0QTg1MyIvPgo8cGF0aCBkPSJNNS42OSA5LjVIMy4yN1Y2LjgzQzQuMzMgNS43IDcuOTEgMy44IDEyIDMuOEMxNC45NiAzLjggMTYuMDIgNC4wOCAxNi43OCA0Ljc5SDE5LjA1QzE4LjA0IDIuOSAxNS4yNyAxLjggMTIgMS44QzcuOTEgMS44IDQuMzMgMy43IDMuMjcgNS43TDUuNjkgOS41WiIgZmlsbD0iI0ZCQkMwNSIvPgo8cGF0aCBkPSJNMTIgOS44QzE0Ljk2IDkuOCAxNi4wMiAxMC4wOCAxNi43OCAxMC43OUgxOS4wNUMxOC4wNCA4LjkgMTUuMjcgNy44IDEyIDcuOEM5LjA0IDcuOCA2LjU0IDkuNzcgNS42OSAxMi41NEgzLjI3VjE1LjJDNC4zMyAxNy4zIDcuOTEgMTkuMiAxMiAxOS4yQzE0Ljk2IDE5LjIgMTYuMDIgMTguOTIgMTYuNzggMTguMjFIMTkuMDVDMTguMDQgMTYuMzEgMTUuMjcgMTUuMiAxMiAxNS4yQzkuMDQgMTUuMiA2LjU0IDE0LjIzIDUuNjkgMTEuNDZIMy4yN1Y4LjhDNC4zMyA2LjcgNy45MSA0LjggMTIgNC44QzE0Ljk2IDQuOCAxNi4wMiA1LjA4IDE2Ljc4IDUuNzlIMTkuMDVDMTguMDQgMy45IDE1LjI3IDIuOCAxMiAyLjhDNy45MSAyLjggNC4zMyA0LjcgMy4yNyA2LjhMNS42OSA5LjVaIiBmaWxsPSIjRUE0MzM1Ii8+Cjwvc3ZnPgo=" alt="Google" class="google-icon">
                        Se connecter avec Google
                    </button>

                    <p class="auth-note">üîí S√©curis√© et priv√© - Aucune donn√©e personnelle n'est stock√©e</p>
                </div>
            </section>

            <!-- Section Configuration manuel (fallback) -->
            <section class="api-keys-section" id="apiKeysSection" hidden>
                <h3>üîë Configuration manuelle (optionnel)</h3>
                <p class="api-info">Si vous pr√©f√©rez utiliser vos propres cl√©s API :</p>

                <div class="form-group">
                    <label for="openaiKey">Cl√© OpenAI :</label>
                    <input type="password" id="openaiKey" placeholder="sk-...">
                    <small>Obtenez votre cl√© sur <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI</a></small>
                </div>

                <div class="form-group">
                    <label for="googleVisionKey">Cl√© Google Vision API :</label>
                    <input type="password" id="googleVisionKey" placeholder="AIza...">
                    <small>Obtenez votre cl√© sur <a href="https://console.cloud.google.com/" target="_blank">Google Cloud</a></small>
                </div>

                <button id="saveApiKeys" class="save-btn">üíæ Sauvegarder</button>
                <button id="backToOAuth" class="back-btn">‚Üê Retour √† la connexion Google</button>
            </section>
        </div>
    </div>

    <script src="freemium.js"></script>
    <script src="payment.js"></script>
    <script src="analytics.js"></script>
    <script src="popup.js"></script>
</body>
</html>